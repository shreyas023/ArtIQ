<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArtIQ | Cart</title>
    <link rel="stylesheet" href="main-style.css">
    
    <script src="JQuery/jquery.js"></script>
    <script src="https://kit.fontawesome.com/f4f79a9cc1.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="topnav">
        <div class="leftmost">
            <a class="active" href="#" id="home">ArtIQ</a>
        </div>
        <div class="middle">
            <a href="#" id="categories">All Categories</a>
            <a href="#" id="opportunities">Opportunities</a>
            <a href="#" id="community">Community</a>
            <a href="#" id="contact">Contact</a>
        </div>
        <div class="rightmost">
            <a href="#" id="user-name"></a>
            <a href="#" id="cart"><i class="fa-solid fa-cart-shopping" style="color: white;"></i>&nbsp;&nbsp;Cart</a>
        </div>
    </div>

    <div class="cart">
        <div class="col2">
            <img src="assets/Association_for_Computing_Machinery_(ACM)_logo.svg.png" alt="" height="200px">
            <br><br>
            <p>Cart is empty</p>
        </div>
        <div class="col3">
            <form id="cart_form">
                <input type="checkbox" id="free-trial" name="free-trial" value="free-trial">
                <label for="free-trial">Free Trial (INR 499.00)</label><br>
                <input type="checkbox" id="self-paced" name="self-paced" value="self-paced">
                <label for="self-paced">Self Paced (INR 999.00)</label><br>
                <input type="checkbox" id="live" name="live" value="live">
                <label for="live">Live (2999.00)</label><br>
            </form>
            <span id="span"></span>
            <span id="span2"></span>
        </div>
    </div>

    <div class="payment">
        <fieldset>
            <legend>Payment details</legend>
            <form id="payment_form">
                <table>
                    <tr>
                        <td>
                            <label for="name">Name</label>
                        </td>
                        <td>
                            <input type="text" id="fname" name="fname" required>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="card_type">Card Type</label>
                        </td>
                        <td>
                            <select id="card_type" name="card_type">
                                <option value="Select">Select</option>
                                <option value="Visa">Visa</option>
                                <option value="Mastercard">Mastercard</option>
                                <option value="Rupay">Rupay</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="card_number">Card Number</label>
                        </td>
                        <td>
                            <input type="text" id="card_number" name="card_number" maxlength="19" required
                                pattern="[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{4}" placeholder="XXXX-XXXX-XXXX-XXXX">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="expiry">Expiry Date</label>
                        </td>
                        <td>
                            <input type="text" id="expiry" name="expiry" required pattern="[0-9]{2}/[0-9]{2}"
                                maxlength="5" placeholder="MM/YY">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="cvv">CVV</label>
                        </td>
                        <td>
                            <input type="text" id="cvv" name="cvv" maxlength="3" required pattern="[0-9]{3}"
                                placeholder="XXX">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="pin">Pin</label>
                        </td>
                        <td>
                            <input type="password" id="pin" name="pin" maxlength="4" required pattern="[0-9]{4}">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="amount">Amount</label>
                        </td>
                        <td>
                            <input type="text" id="amount" name="amount" required>
                        </td>
                    </tr>
                    <tr>
                        <td>

                        </td>
                        <td>
                            <input type="submit" id="submit" value="Buy Now" style="width: 200px; height: 40px; background-color: blueviolet; color: white; border-radius: 10px; border: 2px solid white;cursor: pointer;">
                        </td>
                    </tr>
                </table>
            </form>
        </fieldset>
    </div>

    <footer>
        <div class="foot">
            <div class="leftmost">
                <a class="active" href="#" id="artiq">ArtIQ</a>
                <br><br>
                <p>ArtIQ is an online skill sharing platform that helps you learn new skills. It offers unlimited access
                    to best courses from best specialist to learn thousands of practical lessons in a multitude of
                    fields.</p>
            </div>
            <div>
                <div class="download">
                    <i class="fa fa-twitter"></i>
                    <i class="fa fa-facebook"></i>
                    <i class="fa fa-instagram"></i>
                    <i class="fa fa-linkedin"></i>
                </div>
                <div class="images">
                    <img src="assets/playstore.png" alt="">
                </div>
            </div>
            <div class="top">
                <a href="#top"><i class="fa fa-arrow-up"></i></a>
            </div>
        </div>
        <p>Â© 2024 ArtIQ. All rights reserved</p>
    </footer>

    <script src="cart.js"></script>
    <script>
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        // Retrieve the name parameter from the URL
        var name = getParameterByName('name');
        // Check if the name parameter exists and display it
        if (name) {
            document.getElementById('fname').value = name;
            document.getElementById('artiq').href = 'http://localhost:3000/homepage.html?name=' + encodeURIComponent(name);
            document.getElementById('user-name').innerHTML = '<img src="assets/profile.png" height="20px">&nbsp;&nbsp;' + name;
            document.getElementById('home').href = 'http://localhost:3000/homepage.html?name=' + encodeURIComponent(name);
            document.getElementById('opportunities').href = 'http://localhost:3000/opportunity.html?name=' + encodeURIComponent(name);
            document.getElementById('community').href = 'http://localhost:3000/community.html?name=' + encodeURIComponent(name);
            document.getElementById('contact').href = 'http://localhost:3000/contact.html?name=' + encodeURIComponent(name);
            document.getElementById('categories').href = 'http://localhost:3000/categories.html?name=' + encodeURIComponent(name);
            document.getElementById('user-name').href = 'http://localhost:3000/account.html?name=' + encodeURIComponent(name);
            document.getElementById('cart').href = 'http://localhost:3000/cart.html?name=' + encodeURIComponent(name);
            function nav() {
                window.location.href = 'http://localhost:3000/opportunities.html?name=' + encodeURIComponent(name);
            }
        } else {
            document.getElementById('user-name').innerHTML = '<img src="assets/profile.png" height="20px">&nbsp;&nbsp;guest';
            document.getElementById('home').href = 'http://localhost:3000/homepage.html?name=guest';
            document.getElementById('opportunities').href = 'http://localhost:3000/opportunity.html?name=guest';
            document.getElementById('community').href = 'http://localhost:3000/community.html?name=guest';
            document.getElementById('contact').href = 'http://localhost:3000/contact.html?name=guest';
            document.getElementById('categories').href = 'http://localhost:3000/categories.html?name=guest';
            document.getElementById('user-name').href = 'http://localhost:3000/account.html?name=guest';
            document.getElementById('cart').href = 'http://localhost:3000/cart.html?name=guest';
        }


        $(document).ready(function () {
            var prices = {
                "free-trial": 499.00,
                "self-paced": 999.00,
                "live": 2999.00
            };

            $("input[type='checkbox']").change(function () {
                var total = 0.0;
                var subtotal = 0.0;
                $("input[type='checkbox']:checked").each(function () {
                    var name = $(this).attr("name");
                    subtotal += prices[name];
                    total = subtotal + 0.18 * subtotal;
                });
                $("#span").text("Sub-total : " + subtotal);
                $("#span").append("<br><br>Price including taxes are:<br>");
                $("#span2").text("Total : " + total);

                $("#amount").val(total);
            });
        });

    </script>
    
</body>

</html>